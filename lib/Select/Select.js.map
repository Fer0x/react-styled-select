{"version":3,"sources":["../../src/Select/Select.js"],"names":["value","indexValues","optionsMap","hasOwnProperty","push","Array","isArray","concat","state","values","Set","isOpened","isFocused","isSelected","searchTerm","searchWidth","focusedIndex","options","props","v4","inputInnerRef","searchSizeRef","shouldFireClickOutsideHack","onSearchingBinded","onSearching","bind","onRemoveTagBinded","onRemoveTag","onClearValueBinded","onClearValue","onSelectValueBinded","onSelectValue","onSelectFocusedBinded","onSelectFocused","reduce","setState","getOptions","onOpen","onClose","setTimeout","focus","closeOptions","stopPropagation","multi","delete","from","onChange","pop","onInputClear","preventDefault","resetField","clear","has","add","onValueClick","clearInterval","focusedTimeout","openOptions","setFocus","filter","label","toLowerCase","trim","onInputChange","onTyping","indexOf","getBoundingClientRect","width","length","keyCode","placeholder","searchable","classes","valueRenderer","size","map","selectValue","selectValueLabel","selectPlaceholder","selectMultiValueWrapper","selectInput","selectInputField","noResultsText","optionRenderer","Object","assign","key","id","className","selectOption","tabIndex","onMouseOver","target","getAttribute","onMouseOut","onMouseDown","selectMenuOuter","selectMenu","clearable","selectClearZone","selectClear","generatedClassName","selectNode","name","disabled","selectInnerRef","selectControl","renderSelectMultiValueWrapper","renderSelectClearZone","selectArrowZone","selectArrow","renderSelectMenuOuter","PureComponent","propTypes","any","array","func","bool","string","object","oneOfType","element","defaultProps","Async","ShadowAsync","NormalAsync","ShadowDOM"],"mappings":"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","file":"Select.js","sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\nimport enhanceWithClickOutside from 'react-click-outside'\nimport uuid from 'uuid';\nimport SelectAsync from './Async'\nimport shadowDOM from '../helpers/shadowDOM'\n\nimport {\n  KEY_UP,\n  KEY_ESC,\n  KEY_DOWN,\n  KEY_ENTER,\n  KEY_BACKSPACE\n} from './constants'\n\nconst SEARCH_INPUT_MIN_SIZE = 1;\n\nimport Select from './partials/Select'\nimport SelectMenu from './partials/SelectMenu'\nimport SelectValue from './partials/SelectValue'\nimport SelectMultiValue from './partials/SelectMultiValue'\nimport SelectClear from './partials/SelectClear'\nimport SelectArrow from './partials/SelectArrow'\nimport SelectInput from './partials/SelectInput'\nimport SelectInputField from './partials/SelectInputField'\nimport SelectInputFieldSize from './partials/SelectInputFieldSize'\nimport SelectControl from './partials/SelectControl'\nimport SelectNoResults from './partials/SelectNoResults'\nimport SelectClearZone from './partials/SelectClearZone'\nimport SelectArrowZone from './partials/SelectArrowZone'\nimport SelectMenuOuter from './partials/SelectMenuOuter'\nimport SelectPlaceholder from './partials/SelectPlaceholder'\nimport SelectValueWrapper from './partials/SelectValueWrapper'\nimport SelectMultiValueWrapper from './partials/SelectMultiValueWrapper'\n\nimport ValueRenderer from './renderers/ValueRenderer'\nimport OptionRenderer from './renderers/OptionRenderer'\n\nimport stringifyValue from './functions/stringifyValue'\n\nfunction optionsMapReducer(agregate, current) {\n  agregate[current.value] = current\n  return agregate\n}\n\nclass WrapperSelect extends React.PureComponent {\n  constructor(props) {\n    super(props)\n\n    this.indexValues(props)\n\n    let values = [];\n    if (props.value && this.optionsMap.hasOwnProperty(props.value)) {\n      values.push(props.value)\n    }\n\n    if (Array.isArray(props.value)) {\n      values = values.concat(props.value)\n    }\n\n    this.state = {\n      values: new Set(values),\n      isOpened: false,\n      isFocused: false,\n      isSelected: false,\n      searchTerm: null,\n      searchWidth: 1,\n      focusedIndex: 0,\n      options: props.options,\n      'aria-owns': this.props['aria-owns'] || uuid.v4(),\n      'input-field-id': uuid.v4()\n    }\n\n    this.inputInnerRef = null\n    this.searchSizeRef = null\n    this.shouldFireClickOutsideHack = null\n\n    this.onSearchingBinded = this.onSearching.bind(this)\n    this.onRemoveTagBinded = this.onRemoveTag.bind(this)\n    this.onClearValueBinded = this.onClearValue.bind(this)\n    this.onSelectValueBinded = this.onSelectValue.bind(this)\n    this.onSelectFocusedBinded = this.onSelectFocused.bind(this)\n  }\n\n  indexValues(props) {\n    this.optionsMap = props.options.reduce(optionsMapReducer, {})\n  }\n\n  openOptions() {\n    this.setState({\n      options: this.getOptions(),\n      focusedIndex: 0,\n      isOpened: true\n    })\n    this.props.onOpen()\n  }\n\n  closeOptions() {\n    this.setState({ isOpened: false })\n    this.props.onClose()\n  }\n\n  setFocus() {\n    let _this = this\n    setTimeout(function() {\n      _this.inputInnerRef && _this.inputInnerRef.focus()\n    }, 10)\n  }\n\n  // react-click-outside callback\n\n  handleClickOutside(event) {\n    if (this.state.isOpened && this.shouldFireClickOutsideHack) {\n      this.closeOptions()\n      this.shouldFireClickOutsideHack = false\n    }\n  }\n\n  onRemoveTag(props, event) {\n    event.stopPropagation()\n    const { multi } = this.props;\n\n    this.state.values.delete(props.value)\n\n    this.setState({\n      values: new Set(Array.from(this.state.values))\n    }, () => {\n      this.props.onChange(Array.from(this.state.values))\n    })\n  }\n\n  resetField() {\n    const { multi } = this.props;\n\n    let values = [];\n    if (multi) {\n      values = Array.from(this.state.values)\n      values.pop()\n      this.props.onChange(values)\n    }\n\n    this.setState({\n      values: new Set(values),\n      searchTerm: null,\n      focusedIndex: 0,\n      options: this.props.options,\n    }, () => {\n      this.closeOptions()\n      this.inputInnerRef.value = ''\n      this.props.onInputClear()\n    })\n  }\n\n  onClearValue(event) {\n    event.preventDefault()\n    event.stopPropagation()\n    this.resetField()\n  }\n\n  onSelectValue(newValue, event) {\n    const { multi } = this.props;\n    const { values } = this.state;\n\n    !multi && values.clear() // when is not multi select\n\n    if (!values.has(newValue)) {\n      values.add(newValue)\n      this.setState({\n        values,\n        searchTerm: null,\n        focusedIndex: 0\n      }, () => {\n        this.inputInnerRef.value = ''\n        this.props.onChange(multi ? Array.from(values) : newValue)\n      })\n    }\n    this.closeOptions()\n    this.props.onValueClick(multi ? Array.from(values) : newValue, event)\n  }\n\n  onSelectFocused(event) {\n    this.shouldFireClickOutsideHack = false\n\n    clearInterval(this.focusedTimeout)\n    this.focusedTimeout = setTimeout(() => {\n      this.shouldFireClickOutsideHack = true\n    }, 200)\n\n    this.setState({\n      isFocused: true\n    })\n\n    this.openOptions()\n    this.setFocus()\n  }\n\n  getOptions() {\n    const { multi } = this.props;\n    const { values } = this.state;\n    return this.props.options.filter((opt) => {\n      const label = opt.label.toLowerCase().trim()\n      if (values.has(label) && multi) {\n        return false;\n      }\n      return true;\n    })\n  }\n\n  onSearching(event) {\n    const { onInputChange, onTyping } = this.props\n    const { focusedIndex, options, isOpened } = this.state;\n\n    const typing = () => {\n      const term = this.inputInnerRef.value.toLowerCase().trim()\n\n      onTyping(term)\n\n      const filteredOptions = this.getOptions().filter((opt) => {\n        const label = opt.label.toLowerCase().trim()\n        return label.indexOf(term) !== -1\n      })\n\n      this.setState({\n        searchTerm: this.inputInnerRef.value,\n        searchWidth,\n        options: filteredOptions,\n        isOpened: true,\n        focusedIndex: 0\n      })\n\n      let searchWidth = SEARCH_INPUT_MIN_SIZE;\n      if (this.searchSizeRef) {\n        const width = this.searchSizeRef.getBoundingClientRect().width;\n        searchWidth = width > SEARCH_INPUT_MIN_SIZE ? width : SEARCH_INPUT_MIN_SIZE;\n      }\n\n      setTimeout(() => {\n        this.setState({ searchWidth })\n      })\n    }\n\n    const lastIndex = (options.length - 1)\n    switch (event.keyCode) {\n      case KEY_BACKSPACE: // backspace\n        if (!this.inputInnerRef.value) {\n          this.resetField()\n          break;\n        }\n        setTimeout(typing, 1)\n        break;\n      case KEY_UP:\n        this.setState({\n          focusedIndex: (focusedIndex <= 0 ? lastIndex : (focusedIndex - 1))\n        })\n        break;\n      case KEY_DOWN:\n        if (!isOpened) {\n          this.openOptions()\n          break;\n        }\n        this.setState({\n          focusedIndex: (focusedIndex >= lastIndex ? 0 : (focusedIndex + 1))\n        })\n        break;\n      case KEY_ENTER:\n        if (!options.length) break;\n        const newValue = options[focusedIndex].value\n        this.onSelectValueBinded(newValue, event)\n        break;\n      case KEY_ESC:\n        this.closeOptions()\n        break;\n      default:\n        setTimeout(typing, 1)\n    }\n  }\n\n  renderSelectMultiValueWrapper() {\n    const { multi, placeholder, searchable, classes, valueRenderer } = this.props;\n    const { values, isOpened, isSelected, searchTerm, searchWidth } = this.state;\n\n    const SelectValueComp = multi ? SelectMultiValue : SelectValue;\n    const SelectWrapperComp = multi ? SelectMultiValueWrapper : SelectValueWrapper;\n\n    let content = '';\n\n    if (values.size) {\n      content = Array.from(values).map((value, key) => (\n        <SelectValueComp value={value} onRemoveTag={this.onRemoveTagBinded} key={key} className={classes.selectValue} data-select-value data-multi-value={multi}>\n          {valueRenderer({ multi, value, label: this.optionsMap[value].label }, classes.selectValueLabel)}\n        </SelectValueComp>\n      ))\n    }\n\n    if (!values.size && !searchTerm) {\n      content = (\n        <SelectPlaceholder\n          className={classes.selectPlaceholder}\n          data-select-placeholder>{placeholder}</SelectPlaceholder>\n      )\n    }\n\n    if (!searchable) {\n      return (\n        <SelectWrapperComp\n          for={this.state['input-field-id']}\n          innerRef={(n) => this.inputInnerRef = n}\n          className={classes.selectMultiValueWrapper}\n          data-select-multi-value-wrapper={multi}>\n          {content}\n        </SelectWrapperComp>\n      )\n    }\n\n    return (\n      <SelectWrapperComp\n        for={this.state['input-field-id']}\n        className={classes.selectMultiValueWrapper}\n        data-select-multi-value-wrapper={multi}>\n        {content}\n        <SelectInput data-select-input className={classes.selectInput}>\n          <SelectInputField\n            style={{width: `${searchWidth}px`}}\n            id={this.state['input-field-id']}\n            className={classes.selectInputField}\n            data-select-input-search\n            onKeyDown={this.onSearchingBinded}\n            onChange={this.props.onInputChange}\n            innerRef={(n) => this.inputInnerRef = n}\n            aria-label={placeholder}\n            aria-expanded={isOpened}\n            aria-owns={this.state['aria-owns']}\n            role=\"combobox\" type=\"text\" />\n        </SelectInput>\n        <SelectInputFieldSize\n          data-select-input-size\n          innerRef={(n) => this.searchSizeRef = n}>{searchTerm}</SelectInputFieldSize>\n      </SelectWrapperComp>\n    )\n  }\n\n  renderSelectMenuOuter() {\n    const { classes, noResultsText, optionRenderer } = this.props;\n    const { values, isOpened, focusedIndex, options } = this.state;\n\n    if (!isOpened) {\n      return (\n        <div aria-hidden=\"true\" id={['aria-owns']} role=\"listbox\">\n          <div role=\"option\" tabIndex=\"-1\" />\n        </div>\n      )\n    }\n\n    let selectOptions = <SelectNoResults>{noResultsText}</SelectNoResults>;\n\n    if (options.length > 0) {\n      selectOptions = options.map((opt, i) => {\n        const isSelected = values.has(opt.value)\n        const isFocused = focusedIndex === i;\n        return optionRenderer(Object.assign({\n          key: i,\n          'data-key': i,\n          isSelected,\n          id: this.state['aria-owns'],\n          className: classes.selectOption,\n          isFocused: focusedIndex == i,\n          tabIndex: values.has(opt.value) ? '0' : '-1',\n          onMouseOver: (e) => {\n            const dataKey = e.target.getAttribute('data-key')\n            this.setState({ focusedIndex: dataKey })\n          },\n          onMouseOut: (e) => {\n            this.setState({ focusedIndex: null })\n          },\n          onMouseDown: (e) => this.onSelectValueBinded(opt.value, e)\n        }, opt), i)\n      })\n    }\n    return (\n      <SelectMenuOuter\n        className={classes.selectMenuOuter}\n        data-select-menu-outer>\n        <SelectMenu\n          role=\"listbox\"\n          className={classes.selectMenu} data-select-menu>\n          {selectOptions}\n        </SelectMenu>\n      </SelectMenuOuter>\n    )\n  }\n\n  renderSelectClearZone() {\n    const { clearable, classes } = this.props;\n\n    if (!clearable) return;\n\n    return (\n      <SelectClearZone\n        className={classes.selectClearZone}\n        data-select-clear-zone onMouseDown={this.onClearValueBinded}>\n        <SelectClear\n          className={classes.selectClear} data-select-clear>×</SelectClear>\n      </SelectClearZone>\n    )\n  }\n\n  componentDidMount() {\n    this.props.generatedClassName(this.selectNode.state.generatedClassName)\n  }\n\n  componentDidUpdate() {\n    this.props.generatedClassName(this.selectNode.state.generatedClassName)\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({\n      options: nextProps.options\n    }, () => this.indexValues(nextProps))\n  }\n\n  render () {\n    const { name, disabled, className, classes } = this.props;\n    const { value, isSelected, isOpened } = this.state;\n    return (\n      <Select data-select className={className}\n        ref={(node) => this.selectNode = node} innerRef={(node) => this.selectInnerRef = node}>\n        <input type=\"hidden\" name={name} value={stringifyValue(value)} disabled={disabled} />\n        <SelectControl\n          isOpened={isOpened}\n          aria-haspopup={isOpened}\n          className={classes.selectControl}\n          data-select-control onMouseDown={this.onSelectFocusedBinded}>\n          {this.renderSelectMultiValueWrapper()}\n          {this.renderSelectClearZone()}\n          <SelectArrowZone\n            className={classes.selectArrowZone} data-select-arrow-zone>\n            <SelectArrow isOpened={isOpened} className={classes.selectArrow} data-select-arrow />\n          </SelectArrowZone>\n        </SelectControl>\n        {this.renderSelectMenuOuter()}\n      </Select>\n    )\n  }\n}\n\nWrapperSelect.propTypes = {\n  value: PropTypes.any,\n  options: PropTypes.array,\n  onClose: PropTypes.func,\n  onOpen: PropTypes.func,\n  onChange: PropTypes.func,\n  onValueClick: PropTypes.func,\n  onInputClear: PropTypes.func,\n  clearable: PropTypes.bool,\n  placeholder: PropTypes.string,\n  className: PropTypes.string,\n  classes: PropTypes.object,\n  noResultsText: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.element\n  ]),\n  generatedClassName: PropTypes.func\n}\n\nWrapperSelect.defaultProps = {\n  onClose: () => {},\n  onOpen: () => {},\n  onChange: () => {},\n  onInputChange: () => {},\n  onTyping: () => {},\n  onValueClick: () => {},\n  onInputClear: () => {},\n  clearable: false,\n  searchable: true,\n  multi: false,\n  options: [],\n  placeholder: 'Select...',\n  noResultsText: 'No results found',\n  classes: {\n    selectArrow: '',\n    selectArrowZone: '',\n    selectClear: '',\n    selectClearZone: '',\n    selectControl: '',\n    selectInput: '',\n    selectInputField: '',\n    selectMenu: '',\n    selectMenuOuter: '',\n    selectMultiValueWrapper: '',\n    selectOption: '',\n    selectPlaceholder: '',\n    selectValue: '',\n    selectValueLabel: ''\n  },\n  valueRenderer: ValueRenderer,\n  optionRenderer: OptionRenderer,\n  generatedClassName: () => {}\n}\n\nconst EnhanceWrapperSelect = enhanceWithClickOutside(WrapperSelect)\nconst ShadowWrapperSelect = shadowDOM(EnhanceWrapperSelect)\n\nconst NormalAsync = props => <SelectAsync {...props}><EnhanceWrapperSelect /></SelectAsync>\nconst ShadowAsync = props => <SelectAsync {...props}><ShadowWrapperSelect /></SelectAsync>\n\nShadowWrapperSelect.Async = ShadowAsync\n\nexport const Async  = EnhanceWrapperSelect.Async = NormalAsync\nexport const ShadowDOM = EnhanceWrapperSelect.ShadowDOM = ShadowWrapperSelect\n\nexport default EnhanceWrapperSelect\n"]}