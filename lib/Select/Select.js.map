{"version":3,"sources":["../../src/Select/Select.js"],"names":["SEARCH_INPUT_MIN_SIZE","WrapperSelect","props","optionsMap","options","reduce","agregate","current","value","values","hasOwnProperty","push","Array","isArray","concat","state","Set","isOpened","isFocused","isSelected","searchTerm","searchWidth","focusedIndex","v4","inputInnerRef","searchSizeRef","shouldFireClickOutsideHack","setState","getOptions","onOpen","onClose","setTimeout","focus","event","closeOptions","multi","from","pop","onChange","onInputClear","filter","opt","label","toLowerCase","trim","has","placeholder","searchable","classes","valueRenderer","SelectValueComp","SelectWrapperComp","content","size","map","key","onRemoveTag","selectValue","selectValueLabel","selectPlaceholder","selectMultiValueWrapper","selectInput","width","selectInputField","onSearching","onInputChange","n","noResultsText","optionRenderer","selectOptions","length","i","Object","assign","id","className","selectOption","tabIndex","onMouseOver","e","dataKey","target","getAttribute","onMouseOut","onMouseDown","onSelectValue","selectMenuOuter","selectMenu","clearable","selectClearZone","onClearValue","selectClear","generatedClassName","selectNode","nextProps","console","log","name","disabled","node","selectInnerRef","selectControl","onSelectFocused","renderSelectMultiValueWrapper","renderSelectClearZone","selectArrowZone","selectArrow","renderSelectMenuOuter","PureComponent","stopPropagation","delete","preventDefault","resetField","newValue","clear","add","onValueClick","clearInterval","focusedTimeout","window","openOptions","setFocus","onTyping","typing","filteredOptions","term","indexOf","getBoundingClientRect","lastIndex","keyCode","propTypes","any","array","func","bool","string","object","oneOfType","element","defaultProps"],"mappings":"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","file":"Select.js","sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\nimport enhanceWithClickOutside from 'react-click-outside'\nimport uuid from 'uuid';\n\nimport {\n  KEY_UP,\n  KEY_ESC,\n  KEY_DOWN,\n  KEY_ENTER,\n  KEY_BACKSPACE\n} from './constants'\n\nconst SEARCH_INPUT_MIN_SIZE = 1;\n\nimport Select from './partials/Select'\nimport SelectMenu from './partials/SelectMenu'\nimport SelectValue from './partials/SelectValue'\nimport SelectMultiValue from './partials/SelectMultiValue'\nimport SelectClear from './partials/SelectClear'\nimport SelectArrow from './partials/SelectArrow'\nimport SelectInput from './partials/SelectInput'\nimport SelectInputField from './partials/SelectInputField'\nimport SelectInputFieldSize from './partials/SelectInputFieldSize'\nimport SelectControl from './partials/SelectControl'\nimport SelectNoResults from './partials/SelectNoResults'\nimport SelectClearZone from './partials/SelectClearZone'\nimport SelectArrowZone from './partials/SelectArrowZone'\nimport SelectMenuOuter from './partials/SelectMenuOuter'\nimport SelectPlaceholder from './partials/SelectPlaceholder'\nimport SelectValueWrapper from './partials/SelectValueWrapper'\nimport SelectMultiValueWrapper from './partials/SelectMultiValueWrapper'\n\nimport ValueRenderer from './renderers/ValueRenderer'\nimport OptionRenderer from './renderers/OptionRenderer'\n\nimport stringifyValue from './functions/stringifyValue'\n\nclass WrapperSelect extends React.PureComponent {\n  constructor(props) {\n    super(props)\n\n    this.optionsMap = props.options.reduce((agregate, current) => {\n      agregate[current.value] = current\n      return agregate\n    }, {})\n\n    let values = [];\n    if (props.value && this.optionsMap.hasOwnProperty(props.value)) {\n      values.push(props.value);\n    }\n\n    if (Array.isArray(props.value)) {\n      values = values.concat(props.value);\n    }\n\n    this.state = {\n      values: new Set(values),\n      isOpened: false,\n      isFocused: false,\n      isSelected: false,\n      searchTerm: null,\n      searchWidth: 1,\n      focusedIndex: 0,\n      options: props.options,\n      'aria-owns': this.props['aria-owns'] || uuid.v4(),\n      'input-field-id': uuid.v4()\n    }\n\n    this.inputInnerRef = null\n    this.searchSizeRef = null\n    this.shouldFireClickOutsideHack = null\n  }\n\n  openOptions() {\n    this.setState({\n      options: this.getOptions(),\n      focusedIndex: 0,\n      isOpened: true\n    });\n    this.props.onOpen();\n  }\n\n  closeOptions() {\n    this.setState({ isOpened: false });\n    this.props.onClose();\n  }\n\n  setFocus() {\n    setTimeout(() => {\n      this.inputInnerRef && this.inputInnerRef.focus();\n    }, 10);\n  }\n\n  // react-click-outside callback\n\n  handleClickOutside(event) {\n    if (this.state.isOpened && this.shouldFireClickOutsideHack) {\n      this.closeOptions()\n      this.shouldFireClickOutsideHack = false\n    }\n  }\n\n  onRemoveTag = (props, e) => {\n    e.stopPropagation();\n    const { multi } = this.props;\n\n    this.state.values.delete(props.value);\n\n    this.setState({\n      values: new Set(Array.from(this.state.values))\n    }, () => {\n      this.props.onChange(Array.from(this.state.values));\n    });\n  }\n\n  resetField() {\n    const { multi } = this.props;\n\n    let values = [];\n    if (multi) {\n      values = Array.from(this.state.values);\n      values.pop();\n      this.props.onChange(values);\n    }\n\n    this.setState({\n      values: new Set(values),\n      searchTerm: null,\n      focusedIndex: 0,\n      options: this.props.options,\n    }, () => {\n      this.closeOptions()\n      this.inputInnerRef.value = ''\n      this.props.onInputClear()\n    })\n  }\n\n  onClearValue = (event) => {\n    event.preventDefault()\n    event.stopPropagation()\n    this.resetField();\n  }\n\n  onSelectValue = (newValue, event) => {\n    const { multi } = this.props;\n    const { values } = this.state;\n\n    !multi && values.clear(); // when is not multi select\n\n    if (!values.has(newValue)) {\n      values.add(newValue);\n      this.setState({\n        values,\n        searchTerm: null,\n        focusedIndex: 0\n      }, () => {\n        this.inputInnerRef.value = ''\n        this.props.onChange(multi ? Array.from(values) : newValue);\n      })\n    }\n    this.closeOptions()\n    this.props.onValueClick(multi ? Array.from(values) : newValue, event);\n  }\n\n  onSelectFocused = (event) => {\n    this.shouldFireClickOutsideHack = false\n\n    clearInterval(this.focusedTimeout)\n    this.focusedTimeout = window.setTimeout(() => {\n      this.shouldFireClickOutsideHack = true\n    }, 200)\n\n    this.setState({\n      isFocused: true\n    })\n\n    this.openOptions();\n    this.setFocus();\n  }\n\n  getOptions() {\n    const { multi } = this.props;\n    const { values } = this.state;\n    return this.props.options.filter((opt) => {\n      const label = opt.label.toLowerCase().trim()\n      if (values.has(label) && multi) {\n        return false;\n      }\n      return true;\n    });\n  }\n\n  onSearching = (event) => {\n    const { onInputChange, onTyping } = this.props\n    const { focusedIndex, options, isOpened } = this.state;\n\n    const typing = () => {\n      const filteredOptions = this.getOptions().filter((opt) => {\n        const label = opt.label.toLowerCase().trim()\n        const term = this.inputInnerRef.value.toLowerCase().trim()\n\n        onTyping(term)\n\n        return label.indexOf(term) !== -1\n      });\n\n      this.setState({\n        searchTerm: this.inputInnerRef.value,\n        searchWidth,\n        options: filteredOptions,\n        isOpened: true,\n        focusedIndex: 0\n      })\n\n      let searchWidth = SEARCH_INPUT_MIN_SIZE;\n      if (this.searchSizeRef) {\n        const width = this.searchSizeRef.getBoundingClientRect().width;\n        searchWidth = width > SEARCH_INPUT_MIN_SIZE ? width : SEARCH_INPUT_MIN_SIZE;\n      }\n\n      setTimeout(() => {\n        this.setState({ searchWidth })\n      });\n    }\n\n    const lastIndex = (options.length - 1)\n    switch (event.keyCode) {\n      case KEY_BACKSPACE: // backspace\n        if (!this.inputInnerRef.value) {\n          this.resetField();\n          break;\n        }\n        setTimeout(typing, 1);\n        break;\n      case KEY_UP:\n        this.setState({\n          focusedIndex: (focusedIndex <= 0 ? lastIndex : (focusedIndex - 1))\n        })\n        break;\n      case KEY_DOWN:\n        if (!isOpened) {\n          this.openOptions();\n          break;\n        }\n        this.setState({\n          focusedIndex: (focusedIndex >= lastIndex ? 0 : (focusedIndex + 1))\n        })\n        break;\n      case KEY_ENTER:\n        if (!options.length) break;\n        const newValue = options[focusedIndex].value\n        this.onSelectValue(newValue, event);\n        break;\n      case KEY_ESC:\n        this.closeOptions();\n        break;\n      default:\n        setTimeout(typing, 1);\n    }\n  }\n\n  renderSelectMultiValueWrapper() {\n    const { multi, placeholder, searchable, classes, valueRenderer } = this.props;\n    const { values, isOpened, isSelected, searchTerm, searchWidth } = this.state;\n\n    const SelectValueComp = multi ? SelectMultiValue : SelectValue;\n    const SelectWrapperComp = multi ? SelectMultiValueWrapper : SelectValueWrapper;\n\n    let content = '';\n\n    if (values.size) {\n      content = Array.from(values).map((value, key) => (\n        <SelectValueComp value={value} onRemoveTag={this.onRemoveTag} key={key} className={classes.selectValue} data-select-value data-multi-value={multi}>\n          {valueRenderer({ multi, value, label: this.optionsMap[value].label }, classes.selectValueLabel)}\n        </SelectValueComp>\n      ));\n    }\n\n    if (!values.size && !searchTerm) {\n      content = (\n        <SelectPlaceholder\n          className={classes.selectPlaceholder}\n          data-select-placeholder>{placeholder}</SelectPlaceholder>\n      )\n    }\n\n    if (!searchable) {\n      return (\n        <SelectWrapperComp\n          for={this.state['input-field-id']}\n          className={classes.selectMultiValueWrapper}\n          data-select-multi-value-wrapper={multi}>\n          {content}\n        </SelectWrapperComp>\n      );\n    }\n\n    return (\n      <SelectWrapperComp\n        for={this.state['input-field-id']}\n        className={classes.selectMultiValueWrapper}\n        data-select-multi-value-wrapper={multi}>\n        {content}\n        <SelectInput data-select-input className={classes.selectInput}>\n          <SelectInputField\n            style={{width: `${searchWidth}px`}}\n            id={this.state['input-field-id']}\n            className={classes.selectInputField}\n            data-select-input-search\n            onKeyDown={this.onSearching}\n            onChange={this.props.onInputChange}\n            innerRef={(n) => this.inputInnerRef = n}\n            aria-label={placeholder}\n            aria-expanded={isOpened}\n            aria-owns={this.state['aria-owns']}\n            role=\"combobox\" type=\"text\" />\n        </SelectInput>\n        <SelectInputFieldSize\n          data-select-input-size\n          innerRef={(n) => this.searchSizeRef = n}>{searchTerm}</SelectInputFieldSize>\n      </SelectWrapperComp>\n    );\n  }\n\n  renderSelectMenuOuter() {\n    const { classes, noResultsText, optionRenderer } = this.props;\n    const { values, isOpened, focusedIndex, options } = this.state;\n\n    if (!isOpened) {\n      return (\n        <div aria-hidden=\"true\" id={['aria-owns']} role=\"listbox\">\n          <div role=\"option\" tabIndex=\"-1\" />\n        </div>\n      );\n    }\n\n    let selectOptions = <SelectNoResults>{noResultsText}</SelectNoResults>;\n\n    if (options.length > 0) {\n      selectOptions = options.map((opt, i) => {\n        const isSelected = values.has(opt.value);\n        const isFocused = focusedIndex === i;\n        return optionRenderer(Object.assign({\n          key: i,\n          'data-key': i,\n          isSelected,\n          id: this.state['aria-owns'],\n          className: classes.selectOption,\n          isFocused: focusedIndex == i,\n          tabIndex: values.has(opt.value) ? '0' : '-1',\n          onMouseOver: (e) => {\n            const dataKey = e.target.getAttribute('data-key');\n            this.setState({ focusedIndex: dataKey });\n          },\n          onMouseOut: (e) => {\n            this.setState({ focusedIndex: null });\n          },\n          onMouseDown: (e) => this.onSelectValue(opt.value, e)\n        }, opt), i);\n      });\n    }\n    return (\n      <SelectMenuOuter\n        className={classes.selectMenuOuter}\n        data-select-menu-outer>\n        <SelectMenu\n          role=\"listbox\"\n          className={classes.selectMenu} data-select-menu>\n          {selectOptions}\n        </SelectMenu>\n      </SelectMenuOuter>\n    )\n  }\n\n  renderSelectClearZone() {\n    const { clearable, classes } = this.props;\n\n    if (!clearable) return;\n\n    return (\n      <SelectClearZone\n        className={classes.selectClearZone}\n        data-select-clear-zone onMouseDown={this.onClearValue}>\n        <SelectClear\n          className={classes.selectClear} data-select-clear>×</SelectClear>\n      </SelectClearZone>\n    );\n  }\n\n  componentDidMount() {\n    this.props.generatedClassName(this.selectNode.state.generatedClassName);\n  }\n\n  componentDidUpdate() {\n    this.props.generatedClassName(this.selectNode.state.generatedClassName);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    console.log(nextProps.options);\n    this.setState({\n      options: nextProps.options\n    })\n  }\n\n  render () {\n    const { name, disabled, className, classes } = this.props;\n    const { value, isSelected, isOpened } = this.state;\n    return (\n      <Select data-select className={className}\n        ref={(node) => this.selectNode = node} innerRef={(node) => this.selectInnerRef = node}>\n        <input type=\"hidden\" name={name} value={stringifyValue(value)} disabled={disabled} />\n        <SelectControl\n          isOpened={isOpened}\n          aria-haspopup={isOpened}\n          className={classes.selectControl}\n          data-select-control onMouseDown={this.onSelectFocused}>\n          {this.renderSelectMultiValueWrapper()}\n          {this.renderSelectClearZone()}\n          <SelectArrowZone\n            className={classes.selectArrowZone} data-select-arrow-zone>\n            <SelectArrow isOpened={isOpened} className={classes.selectArrow} data-select-arrow />\n          </SelectArrowZone>\n        </SelectControl>\n        {this.renderSelectMenuOuter()}\n      </Select>\n    )\n  }\n}\n\nWrapperSelect.propTypes = {\n  value: PropTypes.any,\n  options: PropTypes.array,\n  onClose: PropTypes.func,\n  onOpen: PropTypes.func,\n  onChange: PropTypes.func,\n  onValueClick: PropTypes.func,\n  onInputClear: PropTypes.func,\n  clearable: PropTypes.bool,\n  placeholder: PropTypes.string,\n  className: PropTypes.string,\n  classes: PropTypes.object,\n  noResultsText: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.element\n  ]),\n  generatedClassName: PropTypes.func\n}\n\nWrapperSelect.defaultProps = {\n  onClose: () => {},\n  onOpen: () => {},\n  onChange: () => {},\n  onInputChange: () => {},\n  onTyping: () => {},\n  onValueClick: () => {},\n  onInputClear: () => {},\n  clearable: false,\n  searchable: true,\n  multi: false,\n  options: [],\n  placeholder: 'Select...',\n  noResultsText: 'No results found',\n  classes: {\n    selectArrow: '',\n    selectArrowZone: '',\n    selectClear: '',\n    selectClearZone: '',\n    selectControl: '',\n    selectInput: '',\n    selectInputField: '',\n    selectMenu: '',\n    selectMenuOuter: '',\n    selectMultiValueWrapper: '',\n    selectOption: '',\n    selectPlaceholder: '',\n    selectValue: '',\n    selectValueLabel: ''\n  },\n  valueRenderer: ValueRenderer,\n  optionRenderer: OptionRenderer,\n  generatedClassName: () => {}\n}\n\nexport default enhanceWithClickOutside(WrapperSelect)\n"]}